"Textures"
	{
	"Normal.Black.Wall"
		{
		"1x1"       "BEE2/p1/metalwall048b_lrg"
		"2x2"       "BEE2/p1/metalwall048b_med"
		"4x4" 
			{
			"material" "metal/metalwall048b"
			"repeat" "1"
			}
		"Double"
			{
			"material" "BEE2/p1/metalwall048b_lrg"
			"scale" "2"
			}
		"Double"
			{
			"material" "BEE2/p1/metalwall048b_lrg"
			"scale" "2"
			}
		"Options"
			{
			"MixRotation" "0" // Do not rotate.

			// Special case, force the small/medium pattern 
			// at the bottom of walls.
			"BottomTrim" "442221"
			"MixTiles" "1"
			}
		"Weights"
			{
		    "DOUBLE" "32"
		    "1x1" "4"
		    "2x2" "1"
		    // Never use 4x4 tiles unless actually required.
		    "2x1" "0"
		    "1x2" "0"
		    "4x1" "0"
		    "1x4" "0"
		    "4x4" "0"
			}
		"goo"      "metal/metalwall048e" //With moss
		}
		
	// The ceiling is the same as walls, except for the base pattern.
	"Normal.Black.Ceiling"
		{
		"1x1"       "BEE2/p1/metalwall048b_lrg"
		"2x2"       "BEE2/p1/metalwall048b_med"
		"4x4" 
			{
			"material" "metal/metalwall048b"
			"repeat" "1"
			}
		"Double"
			{
			"material" "BEE2/p1/metalwall048b_lrg"
			"scale" "2"
			}
		"Options"
			{
			"MixRotation" "0" // Do not rotate.
			}
		"Weights"
			{
		    "DOUBLE" "32"
		    "1x1" "4"
		    "2x2" "1"
		    // Never use 4x4 tiles unless actually required.
		    "2x1" "0"
		    "1x2" "0"
		    "4x1" "0"
		    "1x4" "0"
		    "4x4" "0"
			}
		"goo"      "metal/metalwall048e" //With moss
		}
	"Normal.Black.Floor"
		{
		"4x4" "metal/metal_modular_floor001"
		"goo" "metal/metalwall048e" //With moss
		}

	"Normal.White.Floor"
		{
		// Second variant should appear much less often
		"4x4"  "BEE2/p1/concrete_modular_floor001a"
		"4x4"  "BEE2/p1/concrete_modular_floor001a"
		"4x4"  "BEE2/p1/concrete_modular_floor001a"
		"4x4"  "BEE2/p1/concrete_modular_floor001a"
		"4x4"  "BEE2/p1/concrete_modular_floor001a"
		"4x4"  "BEE2/p1/concrete_modular_floor001b"
		"Options"
			{
			"MixRotation" "0" // Do not rotate.
			}
		}
	"Normal.White.Ceiling" 
		{
		"4x4" "BEE2/p1/concrete_modular_ceiling001a"
		"Options"
			{
			"MixRotation" "0" // Do not rotate.
			}
		}

	"Normal.White.Wall"
		{
		"2x1" "concrete/concrete_modular_wall001a"
		"2x1" "concrete/concrete_modular_wall001a"
		"2x1" "concrete/concrete_modular_wall001a"
		"2x1"
			{
			"material" "BEE2/p1/concrete_modular_wall001d"
			 // Darker panel detail. Do not repeat when generating,
			 // so these are sporadic by themselves.
			"repeat" "1"
			}

		// c/e should be used on the bottom, f on the top.

		"2x2" "bee2/p1/concrete_modular_wall001a"
		"4x4" "BEE2/p1/concrete_modular_wall002"

		"goo"
			{
			"material" "concrete/concrete_modular_wall001b"
			// Move tideline in texture to the surface.
			"offset" "0 370"
			}
		}

	"Panel.White.Floor"   "BEE2/p1/concrete_modular_floor001c"
	"Panel.White.Ceiling" "BEE2/p1/concrete_modular_floor001c"

	// Bullseye textures to match the above
	"Bullseye.White.Wall"       "BEE2/bullseye/concrete_modular_wall"
	"Bullseye.White.Floor"      "BEE2/bullseye/concrete_modular_floor"
	"Bullseye.White.Ceiling"    "BEE2/bullseye/concrete_modular_floor"
	
	"Bullseye.Black.Wall"       "BEE2/bullseye/metalwall48"
	"Bullseye.Black.Floor"      "BEE2/bullseye/metalwall48"
	"Bullseye.Black.Ceiling"    "BEE2/bullseye/metalwall48"

	"Special"
		{
		"Behind"        "metal/citadel_metalwall060a"
		"Edge"          "metal/metaltrack001a"
		"Panel_edge"    "signage/hazard_orange_03b"
		"Glass"         "glass/glasswindow_frosted"
		"Grating"       "metal/metalgrate018"
		
		"Goo"           "BEE2/p1/goo/p1_goo"
		"Goo_cheap"     "BEE2/p1/goo/p1_goo" // No reflections, so it doesn't matter!
		}
	"Overlays"
		{		
		"Exit"                "signage/signage_exit"
		"Arrow"               "signage/signage_overlay_arrow"
		"Dot"                 "signage/shape01"
		"Moon"                "signage/shape02"
		"Triangle"            "signage/shape03"
		"Cross"               "signage/shape04"
		"Square"              "signage/shape05"
		"Circle"              "signage/signage_shape_circle"
		"Sine"                "signage/signage_shape_sine"
		"Slash"               "signage/signage_shape_slash"
		"Star"                "signage/signage_shape_star"
		"Wavy"                "signage/signage_shape_wavy"
		
		// Overlay on top to distinguish repeat shapes.
		"ShapeFrame"    "BEE2/signage_frame/frame_blue"
		"ShapeFrame"    "BEE2/signage_frame/frame_oran"
		}
	"Antlines"
		{
		"Floor"
			{
			"Straight"
				{
				"Tex"   "BEE2/ind_p1/straight_floor"
				"Scale" "1"
				}
			"Corner"
				{
				"Tex"   "BEE2/ind_p1/corner_floor"
				"Scale" "1"
				}
			}
		"Wall"
			{
			"Straight"
				{
				"Tex"   "BEE2/ind_p1/straight_wall"
				"Scale" "1"
				}
			"Corner"
				{
				"Tex"   "BEE2/ind_p1/corner_wall"
				"Scale" "1"
				}
			}
		}
	}
"Options"
	{
	"goo_mist"                  "1"

	"remove_info_lighting"      "1"

	// Signs use a frame model.
	"signInst"                  "instances/BEE2/p1/sign_frame.vmf"
	"signSize"                  "31" // Shrink it to fit better in the frame

	// Placed at the exit sign, positioned specially.
	"signExitInst"				"instances/BEE2/p1/elevator_sp/exit_sign/sign.vmf"
	"remove_exit_signs_dual"	"1"
	"remove_exit_signs"         "0" // If they're not next to each other, place single ones.

	"remove_pedestal_plat"      "1"
	"force_Brush_reflect"       "1"
	"goo_white_walls"			"1"

	"timer_sound"               "ambient/machines/ticktock1.wav"

	// Override the brushes used to generate tiles. 
	"_tiling_template_"         "BEE2_PORTAL_1_TILING_TEMPLATE"
	}
"Conditions"
	{
	"Condition"
		{
		"ItemConfig"
			{
			"ID" "BEE2_PORTAL_1"
			"Name" "PortedPGun"
			"Value" "1"
			}
		"game"      "Portal2"
		"Result"
			{
			"addGlobal"
				{
				"File"          "instances/BEE2/p1/set_portalgun.vmf"
				"Name"          "set_pgun"
				"fixup_style"   "2" // "None", allows us to directly refer to the viewmodel entity
				}
			}
		}
	"Condition"
		{
		"ItemConfig"
			{
			"ID" "BEE2_PORTAL_1"
			"Name" "OldDissolve"
			"Value" "1"
			}
		"Result"
			{
			"addGlobal"
				{
				"File"          "instances/BEE2/p1/set_dissolve.vmf"
				"Name"          "set_dissolve"
				}
			}
		}
	"Condition"
		{
		"instance" "[indPan]"
		"Result"
			{
			"SetTiles"
				{
				"Offset" "0 0 0"
				"Tile" "n"
				}
			}
		}
	"Condition"
		{
		// always run, add the P1 color correction
		"Result"
			{
			"AddGlobal"	"instances/bee2/p1/color_correction.vmf"
			}
		}
	"Condition"
		{
		// Door cameras, add for both entry and exit doors
		"instance" "[spEntryCorr], [spExitCorr]"
		"StyleVar" "DoorCameras"
		// Basic check that this space is free - check all four tiles, and that it's inside the map.
		"BlockType"
			{
			"Offset" "0 0 2"
			"Type"   "AIR OCCUPIED GOO"
			}
		// TODO: change this to check actual item collisions once that's implemented
		"PosIsSolid"
			{
			"Pos" "-64 16 176"
			"Pos2" "-64 48 208"
			"Dir" "1 0 0"
			"Type" "tile"
			}
		"Result"
			{
			"addOverlay"
				{
				"file"	 "instances/BEE2/p1/camera.vmf"
				"Offset" "-64 32 128"
				// TODO: possibly temporary rotation, if we reorient this
				"rotation" "-90 180 0"
				}
			"PrecacheModel" "bee2/props_p1/security_camera"
			}
		}
	}
"Conditions"
	{
	"Condition"
		{
		"Result"
			{
			"Has" "StyleLocModern"
			"has" "StyleDmgIntact"
			}
		}
	}
