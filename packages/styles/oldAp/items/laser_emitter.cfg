"Conditions"
	{
	"Condition"
		{
		"Priority" "10"
		"instance" "<ITEM_LASER_EMITTER_CENTER>, <ITEM_LASER_EMITTER_OFFSET>"
		"Result"
			{
			"SetInstVar" "$offset 0"
			}
		"Condition"
			{
			"instance"	"<ITEM_LASER_EMITTER_OFFSET>"
			"Result"
				{
				"OffsetInst" "-32 0 0"
				"Condition"
					{
					"instvar" "$cube_type != 0"
					"Result"
						{
						"ChangeInstance" "<ITEM_LASER_EMITTER_OFFSET:bee2_offset>"
						"SetInstVar" "$offset 14"
						"MapInstVar"
							{
							"$cube_type" "$yaw"
							"1" "180" 
							"2" "90"
							"3" "0"
							"4" "270"
							}
						"RotateInst"
							{
							"axis"  "0 0 1"
							"angle" "$yaw"
							}
						}
					}
				}
			}

		// If no inputs, make the light entirely static.
		"Condition"
			{
			"instvar" "$connectioncount > 0"
			"Result"
				{
				"AddOverlay"
					{
					"File" "instances/BEE2/logic/laser/light_dynamic.vmf"
					"Offset" "$offset 0 -20"
					"Fixups"
						{
						"$start_enabled" "$start_enabled"
						}
					}
				}
			"ElseCondition"
				{
				"instvar" "$start_enabled = 1"
				"Result"
					{
					"AddOverlay"
						{
						"File" "instances/BEE2/logic/laser/light_static.vmf"
						"Offset" "$offset 0 -20"
						"copy_fixup" "0" // Not required.
						}
					}
				// Else: Permanently off, no light.
				}
			}
		"Result"
			{
			"DeleteFixup" "$offset"
			}
		}
	}
