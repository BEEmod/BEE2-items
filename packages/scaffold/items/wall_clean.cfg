"Conditions"
	{
	"Condition"
		{
		"Priority" "-350"
		"Instance" "<ITEM_BEE2_SCAFFOLD_WALL>"

		"Condition"
			{
			"Orientation" "floor"
			// On the floor, we move the platform to be right next to the emitter so you
			// can jump up to it.
			"Result"
				{
				"ChangeInstance" "instances/BEE2/clean/items/scaffold/floor_emitter.vmf"
				// Move 16 units towards center of voxel
				"OffsetInst" "16 0 -56"
				}
			"Else"
				{
				"ChangeInstance" "instances/BEE2/clean/items/scaffold/wall_emitter.vmf"

				// Shift the various sub-voxel handle positions to be more useful
				"Condition"
					{
					// -X pointing up - top positions, shift 16 units towards +X (down)
					"Orientation"
						{
						"direction"     "up"
						"from_dir"      "-1 0 0"
						}
					"Result"
						{
						"OffsetInst" "16 0 0"
						}
					}
				"Condition"
					{
					// -X pointing down - bottom positions, shift 16 towards -X (down)
					"Orientation"
						{
						"direction"     "down"
						"from_dir"      "-1 0 0"
						}
					"Result"
						{
						"OffsetInst" "-16 0 0"
						}
					}
				"Condition"
					{
					// +Y pointing up - left positions, shift 16 out and 32 towards +Y (up)
					"Orientation"
						{
						"direction"     "up"
						"from_dir"      "0 1 0"
						}
					"Result"
						{
						"OffsetInst" "-16 32 0"
						}
					}
				"Condition"
					{
					// +Y pointing down - right positions, shift 16 out and 32 towards -Y (up)
					"Orientation"
						{
						"direction"     "down"
						"from_dir"      "0 1 0"
						}
					"Result"
						{
						"OffsetInst" "-16 -32 0"
						}
					}
				"TemplateBrush"
					{
					"ID" "BEE2_UNST_SCAFFOLD_BACKING_CLEAN"
					}
				}
			}
		"Result"
			{
			"LinkedItem"
				{
				"Group" "BEE2_SCAFFOLD"
				"Antlines" "remove"
				
				"StartLogic"    "instances/BEE2/clean/items/scaffold/osc_start.vmf"
				"EndLogic"      "instances/BEE2/clean/items/scaffold/osc_end.vmf"
				"MidLogic"      "instances/BEE2/clean/items/scaffold/track_mid.vmf"
				}
			}
		}
	// See the piston config for the oscillating logic.
	}
