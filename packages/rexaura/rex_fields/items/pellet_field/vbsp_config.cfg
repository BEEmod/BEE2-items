"Replacements"
	{
	"%NODRAW%" "1"
	"%CC_CND%" "World.RobotNegInteractPitchedUp"
	}

"Fizzlers"
	{
	// We have two type of this, and therefore two fizzler types. We just swap to timer
	// if needed.
	"Fizzler"
		{
		"ID"            "BEE2_REX_PELLET_FIELD"
		"Item_ID"       "ITEM_REX_PELLET_FIELD"
		
		"Base_Inst"     "<ITEM_REX_PELLET_FIELD:fizz_base>"
		"Model_Left"    "<ITEM_REX_PELLET_FIELD:fizz_model>"
		"Model_Right"   "<ITEM_REX_PELLET_FIELD:fizz_model>"
		"Nodraw_behind" "%NODRAW%"

		"Brush"
			{
			"Name"          "field"
			
		    "tex_trigger"   "tools/toolstrigger"
			"Singular" "1"
		    
			"Keys"
				{
				"classname"     "trigger_multiple"
				"Spawnflags"    "64" // Everything
				"filtername"    "$filter"
				"thinkfunction" "Think"
				"vscripts"      "BEE2/rex_pellet_field.nut"
				}
			"set_axis_var" "1" // Save the plane axis to the "axis" vscript variable.
			}
		}
	}

"Conditions"
	{
	"Condition"  
		{
		"Priority" "-300"
		"instance"  "<ITEM_REX_PELLET_FIELD:fizz_base>"  
		"Condition"
			{
			"instvar" "timer_delay > 0"
			"instvar" "timer_delay <= 30"
			"Result"
				{
				// Timed
				"SetInstVar" "$is_timer true"
				"SetInstVar" "$color 0 0 200"
				"ChangeIOType"
					{
					"Type" "AND"
					"InvertVar"   "$start_enabled"
					"Enable_Cmd"  "io,TurnOn,,0.0,-1"
					"Disable_Cmd" "io,TurnOff,,0.0,-1"

					"Out_Activate"   "instance:field;OnUser2"
					"Out_Deactivate" "instance:field;OnUser1"

					"timer_done_cmd" 	"field,CallScriptFunction,timer_done,0,-1"
					"timer_sound_pos" 	"0 0 0"
					"force_timer_sound" "1"
					}
				}
			"Else"
				{
				// Toggle
				"SetInstVar" "$is_timer false"
				"SetInstVar" "$color 0 150 0"
				}
			}
		"Result"
			{
			"Has"
				{
				"Fizzler"           "1"
				"RexPelletField"    "1"
				}
			"addGlobal" "instances/bee2/logic/rex_pellet_field.vmf"
			"MapInstVar"
				{
				"$start_enabled" "$anim"
				"1" "idle"
				"0" "closeIdle"
				}
			}
		}
	"Condition"
		{
		"Priority" "50"
		"instance" "<ITEM_REX_PELLET_FIELD>"
		"Condition"
			{
			"Has" "Pellet"
			"Has" "RocketTurret"
			"Result"
				{
				// OR both filters.
				"addGlobal" "instances/bee2/logic/filter_flux_field.vmf"
				"SetInstVar" "$filter @filter_flux_field"
				}
			"ElseCondition"
				{
				"Has" "RocketTurret"
				"Result"
					{
					"SetInstVar" "$filter @rocket_filter"
					}
				"Else"
					{
					// In global_pti_ents, if not present, 
					// it'll just always fail.
					"SetInstVar" "$filter @filter_pellet"
					}
				}
			}
		}
	}
