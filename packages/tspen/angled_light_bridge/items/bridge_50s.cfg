"Conditions"
	{
	"Condition"
		{
		"instance"	"<ITEM_TS_BRIDGE_PANEL>"
		"Condition"
			{
			// Force the bridge on if no inputs are provided.
			"InstVar" "$conn_count_b = 0"
			"Result"
				{
				"SetInstVar" "$start_enabled 1"
				}
			}
		"Result"
			{
			"MapInstVar"
				{
				"$start_reversed" "$orient"
				"0" "horiz"
				"1" "vert"
				}
			"RemoveInstVar" "$start_reversed"
			}
		"Condition"
			{
			"InstVar"   "$conn_count_a = 0"
			"Result" // The panel is immoveable, just need to directly control the bridge.
				{
				"MapInstVar"
					{
					"$animation" "$angle"
					"ramp_30_deg_open" "30"
					"ramp_45_deg_open" "45"
					"ramp_60_deg_open" "60"
					"ramp_90_deg_open" "90"
					}
				"ChangeInstance" "instances/BEE2/50s/items/panel_bridge/static_$angle_$orient.vmf"
				"AddOverlay" "<ITEM_TS_BRIDGE_PANEL:bee2_bridge_static>"
				"RemoveInstVar" "$angle"
				}
			// Dynamic panel.
			"Else"
				{
				"ChangeInstance" "instances/BEE2/50s/items/panel_bridge/common_dynamic.vmf"
				"AddOverlay" "instances/BEE2/50s/items/panel_bridge/dynamic_$orient.vmf"

				// Rotated if vertical.
				"AddOverlay" "<ITEM_TS_BRIDGE_PANEL:bee2_bridge_dynamic>"

				"Condition"
					{
					"InstVar" "$start_deployed 0"
					"Result"
						{
						"AddOverlay" "instances/BEE2/clean/items/panel_bridge/spawnclose.vmf"
						}
					}
				}
			}
		}
	// Pre-rotate the static instance for the bridge around the panel hinge.
	"Condition"
		{
		"instance" "<ITEM_TS_BRIDGE_PANEL:bee2_bridge_static>"
		"Result"
			{
			"RotateInst"
				{
				"axis" "0 -1 0"
				"angle" "$angle"
				"around" "-64 0 -64"
				}
			}
		}
	// If vertical, rotate the bridge.
	"Condition"
		{
		"instance" "<ITEM_TS_BRIDGE_PANEL:bee2_bridge_static, bee2_bridge_dynamic>"
		"InstVar" "$orient vert"
		"Result"
			{
			"RotateInst"
				{
				"axis" "0 0 1"
				"angle" "90"
				}
			}
		}
	}
